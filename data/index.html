<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/>
    <title>WebSocket Test</title>
    <style>
      @import url("https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&subset=devanagari,latin-ext");

* {
  padding: 0;
  margin: 0;
  box-sizing: border-box;
  font-family: "Poppins", sans-serif;
}

body {
  background-color: #1b1c24;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.container h1 {
  font-size: 18px;
  line-height: 30px;
  color: #f0eff3;
  text-align: center;
  position: relative;
}

.row {
  margin: 20px;
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
}
.row label {
  padding: 20px;
  cursor: pointer;
  display: flex;
}

.row label input[type="checkbox"] {
  display: none;
}

.row label .icon-box {
  position: relative;
  display: flex;
  width: 120px;
  padding: 20px;
  flex-direction: column;
  align-items: center;
  background-color: #ececec;
  color: #777777;
  border-radius: 25px;
  font-size: 21px;
  transition: 0.5s;
  user-select: none;
}

.row label input[type="checkbox"]:checked ~ .icon-box {
    transition: all 0.7s ease;
    background: linear-gradient(0deg, #3976f6, #578dff);
    color: #fff;
}

.row label .icon-box span {
  margin: 5px;
  font-size: 18px;
}

.container .btn {
  width: 130px;
  height: 40px;
  position: absolute;
  left: 550px;
  font-size: 16px;
  border: 0;
  outline: none;
  transition: 0.5s cubic-bezier(0.755, 0.05, 0.855, 0.06);
}
    </style>
    <script language="javascript" type="text/javascript">

        var url = "ws://192.168.0.17:1337/";
        var output;
        var button;
        var context;
        
        // This is called when the page finishes loading
        function init() {
        
            // Assign page elements to variables
            button = document.getElementById("toggleButton");
            output = document.getElementById("output");
            
            // Connect to WebSocket server
            wsConnect(url);
        }
        
        // Call this to connect to the WebSocket server
        function wsConnect(url) {
            
            // Connect to WebSocket server
            websocket = new WebSocket(url);
            
            // Assign callbacks
            websocket.onopen = function(evt) { onOpen(evt) };
            websocket.onclose = function(evt) { onClose(evt) };
            websocket.onmessage = function(evt) { onMessage(evt) };
            websocket.onerror = function(evt) { onError(evt) };
        }
        
        // Called when a WebSocket connection is established with the server
        function onOpen(evt) {
        
            // Log connection state
            console.log("Connected");
            
            // Enable button
            button.disabled = false;
            
            // Get the current state of the LED
            doSend("getLEDState");
        }
        
        // Called when the WebSocket connection is closed
        function onClose(evt) {
        
            // Log disconnection state
            console.log("Disconnected");
            
            // Disable button
            button.disabled = true;
            
            // Try to reconnect after a few seconds
            setTimeout(function() { wsConnect(url) }, 2000);
        }
        
        // Called when a message is received from the server
        function onMessage(evt) {
        
            // Print out our received message
            console.log("Received: " + evt.data);
            
            // Update circle graphic with LED state
            switch(evt.data) {
                case "0":
                    document.getElementById("toggleButton").checked = false;
                    break;
                case "1":
                    document.getElementById("toggleButton").checked = true;
                    break;
                default:
                    break;
            }
        }
        
        // Called when a WebSocket error occurs
        function onError(evt) {
            console.log("ERROR: " + evt.data);
        }
        
        // Sends a message to the server (and prints it to the console)
        function doSend(message) {
            console.log("Sending: " + message);
            websocket.send(message);
        }
        
        // Called whenever the HTML button is pressed
        function onPress() {
            doSend("toggleLED");
            doSend("getLEDState");
        }
        
        // Call the init function as soon as the page loads
        window.addEventListener("load", init, false);
        
        </script>

</head>
<body>  
    <div class="container">
        <h1>Choose your interest</h1>
        <div class="row">
          <label>
            <input type="checkbox" id="toggleButton" onclick="onPress()">
            <div class="icon-box">
              <i class="fa fa-heart" aria-hidden="true"></i>
              <span>Health</span>
            </div>
          </label>
          <!--<label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-music" aria-hidden="true"></i>
              <span>Music</span>
            </div>
          </label>
          <label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-imdb" aria-hidden="true"></i>
              <span> Movies </span>
            </div>
          </label>
          <label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-book" aria-hidden="true"></i>
              <span>Books</span>
            </div>
          </label>
  
          <label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-dribbble" aria-hidden="true"></i>
              <span>Sports</span>
            </div>
          </label>
  
          <label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-desktop" aria-hidden="true"></i>
              <span>Technology</span>
            </div>
          </label>
          <label>
            <input type="checkbox" name="" />
            <div class="icon-box">
              <i class="fa fa-gamepad" aria-hidden="true"></i>
              <span>Games</span>
            </div>
          </label>
        -->
        </div>
      </div>
</body>
</html>